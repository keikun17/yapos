.supplier-purchases-header
  %h1 Supplier Orders


.pull-right=will_paginate(@supplier_purchases)
-# = link_to t('.new', :default => t("helpers.links.new")), new_order_path, :class => 'btn btn-primary'
%table.table.table-condensed
  %thead
    %th.span1 SUPPLIER PO#
    %th.span1 RFQs
    %th.span1 ClientPOs
    %th.span6 Specs
    %th.span1 Ordered from Supplier at
    %th.span1 Supplier
    %th.span1
  %tbody
    - @supplier_purchases.each do |supplier_purchase|
      %tr{class: "multi-content #{'error' if supplier_purchase.ordered_at.blank?}"}
        %td= link_to supplier_purchase.reference, print_supplier_purchase_path(supplier_purchase), target: '_blank'
        %td
          - supplier_purchase.quotes.uniq.each do |quote|
            = link_to quote.quote_reference, quote_path(quote)
            (#{quote.client_abbrev || quote.client_name})
            %br
        %td
          - supplier_purchase.orders.each do |order|
            = link_to order.reference, order
            %br
        %td
          - supplier_purchase.supplier_orders.each do |supplier_order|
            %p
              %span.request-quantity= supplier_order.offer.request.decorate.display_quantity
              = supplier_order.actual_specs
        %td= supplier_purchase.ordered_from_supplier_at
        %td
          - supplier_purchase.suppliers.each do |supplier|
            = link_to supplier.name, supplier
            %br
        %td
          = link_to 'Edit', edit_supplier_purchase_path(supplier_purchase),:class => 'btn btn-mini'
          = link_to 'Print', print_supplier_purchase_path(supplier_purchase),:class => 'btn btn-mini', target: '_blank'
