- model_class = Quote
.page-header
  %h1
    = t '.title', :default => @quote.quote_reference
    = link_to t('.edit', :default => t("helpers.links.edit")), edit_quote_path(@quote), :class => 'btn'

%p
  %strong= model_class.human_attribute_name(:quote_reference) + ':'
  %br
  = @quote.quote_reference
%p
  %strong= model_class.human_attribute_name(:order_reference) + ':'
  %br
  = @quote.order_links
%p
  %strong= model_class.human_attribute_name(:client_name) + ':'
  %br
  = link_to_client(@quote.client)
%p
  %strong= model_class.human_attribute_name(:description) + ':'
  %br
  = simple_format(@quote.description)

%p
  %strong= model_class.human_attribute_name(:quote_date) + ':'
  %br
  = @quote.quote_date.to_date
%p
  %strong= model_class.human_attribute_name(:status) + ':'
  %br
  = @quote.display_status
%p
  %strong= model_class.human_attribute_name(:supplier_name) + ':'
  %br
  = supplier_links(@quote)
 
%h3 Attachments
- if @quote.attachments.empty?
  No Attachments
- else
  %ul.attachments
    - @quote.attachments.each do |attachment|
      %li= link_to attachment[:document], quote_attachment_path(@quote, :id => attachment.id)

%h3 Requests
%table.table.table-striped
  %thead
    %tr
      %th Quoted Specs
      %th Offered Specs
      %th Supplier
      %th Offer Remarks
      %th Buying Price
      %th Selling Price
      %th Order Reference
      %th 
  %tbody
    - @requests.each do |req|
      - offer_count = req.offers.size
      - offers = req.offers
      - offer = offers.shift
      %tr
        %td{rowspan: offer_count}
          = simple_format(req.specs)
          - if !req.remarks.blank?
            %strong Remarks:
            #{simple_format(req.remarks)}
        %td= offer.specs if offer
        %td= offer.supplier_name if offer
        %td= offer.remarks if offer
        %td= offer.buying_price if offer
        %td= offer.selling_price if offer
        %td= offer.order_reference if offer

      - offers.each do |offer|
        %tr
          %td= offer.specs
          %td= offer.supplier_name
          %td= offer.remarks 
          %td= offer.buying_price
          %td= offer.selling_price
          %td= offer.order_reference

.form-actions
  = link_to t('.back', :default => t("helpers.links.back")), quotes_path, :class => 'btn'
  = link_to t('.edit', :default => t("helpers.links.edit")), edit_quote_path(@quote), :class => 'btn'
  = link_to t('.destroy', :default => t("helpers.links.destroy")), quote_path(@quote), :method => "delete", :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) }, :class => 'btn btn-danger'
